{% extends "admin/base.html" %}
{% block main %}

<form method="post" class="config-form" id="config-form">
  <input type="hidden" name="csrf" value="{{ csrf }}">
  <legend>
    {% if editing %}
      Edit Issuer: {{ issuer.name }}
    {% else %}
      New Issuer
    {% endif %}
  </legend>
  <div>
    <label for="issuer-name">Name</label>
    <input type="text"
           name="name"
           id="issuer-name"
           placeholder="Widgets, Inc."
           maxlength="128"
           value="{{issuer.name | undef}}"
           required>
    <span class="help-block">
      Name of the issuer. This should be the top-level name of your
      institution, e.g. "Mozilla"
    </span>
  </div>

  {% if issuer.shortname %}
  <div>
    <label>Short name</label>
    <span class="input-large uneditable-input">{{issuer.shortname}}</span>
 </div>
 {% endif %}

  <div>
    <label for="issuer-org">Organization (optional)</label>
    <input type="text"
           name="org"
           id="issuer-org"
           maxlength="128"
           value="{{issuer.org | undef}}"
           placeholder="Organization">
    <span class="help-block">
      Organization for your issuer. This should be the organization
      or group within your institution, e.g. "Webmaker"
    </span>
 </div>

  <div>
    <label for="issuer-contact">Contact Email</label>
    <input type="email"
           name="contact"
           id="issuer-contact"
           value="{{issuer.contact | undef}}"
           placeholder="badges@example.org"
           pattern="[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?"
           required>
    <span class="help-block">
      Contact at your organization for any badge-related issues. It's
      probably best to make this email something that won't change, so
      don't make it a specific person and use a forwarding email address
      instead.
    </span>
  </div>

  <div>
    <label for="issuer-secret">Token Secret</label>
    <input type="text"
           name="secret"
           id="issuer-secret"
           value="{{issuer.jwtSecret | undef}}"
           placeholder="shhh secret">
    <span class="help-block">
      The secret used to sign tokens. Leave this blank to auto-generate
      a 64 character random secret.
    </span>
  </div>

  <div class="form-actions">
    <button id="save-issuer" type="submit" class="btn btn-primary">Save Issuer</button>
  </div>
</form>

{% endblock %}
