{% extends "admin/base.html" %}
{% block main %}
<h1>Issuers (<a href="/admin/issuer">Create a new issuer</a>)</h1>
{% for issuer in issuers %}
<ul>
  <li><a href="/admin/issuer/{{ issuer.shortname }}">{{ issuer.name }}</a></li>
</ul>
{% endfor %}

<h1>Badges (<a href="/admin/badge">Create a new badge</a>)</h1>
<ul class="badge-list">
{# TODO: group by issuer #}
{% for badge in badges %}
  <li>
    <form method="post" action="/admin/badge/{{ badge.shortname }}" class="remove-form js-remove-badge">
      <input type="hidden" name="_method" value="delete">
      <input type="hidden" name="csrf" value="{{ csrf }}">
      
      <a class="badge-name" href="/admin/badge/{{ badge.shortname }}">
        <img class="badge-image" src="{{ badge.relativeUrl('image') }}">
        {{ badge.name }}</a>
      
      (<code>{{ badge.shortname }}</code>)
      <br>{{ badge.issuer.name }}
      <br>{{ badge.description | stupidSafe }}
      
      <br>
      <div class="btn-group">
        <a href="#" class="btn btn-primary btn-small edit-link">Manage</a>
        <a class="btn btn-primary btn-small dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/admin/badge/{{ badge.shortname }}"><i class="icon-wrench"></i> Manage Triggers</a></li>
          <li><a href="/admin/badge/{{ badge.shortname }}/edit/"><i class="icon-pencil"></i> Edit Details</a></li>
          <li><a href="/admin/badge/{{ badge.shortname }}/claims/"><i class="icon-th-large"></i> Claim Codes</a></li>
          <li class="divider"></li>
          <li><a href="#" class="js-delete-badge"><i class="icon-trash"></i> Delete</a></li>
        </ul>
      </div>
      
    </form>
  </li>
{% endfor %}
</ul>

<h1>Behaviors (<a href="/admin/behavior">Create a new behavior</a>)</h1>
<ul class="behavior-list">
{% for behavior in behaviors %}
  <li>
    <form method="post" action="/admin/behavior/{{ behavior.shortname }}" class="remove-form js-remove-behavior">
      <input type="hidden" name="_method" value="delete">
      <input type="hidden" name="csrf" value="{{ csrf }}">
      <strong class="behavior-name">{{ behavior.name }}</strong> (<code>{{ behavior.shortname }}</code>)
      <br>{{ behavior.description | stupidSafe }}
      
      <br><a href="" class="btn btn-small remove-link js-show-remove">Remove</a>
      <button class="btn btn-small js-cancel-button">Nevermind</button>
      <input type="submit" value="Remove behavior" class="btn btn-danger btn-small js-remove-button"> 
   </form>
  </li>
{% endfor %}
</ul>
{% endblock %}

{% block footer %}
<script src="/js/badge-index.js"></script>
{% endblock %}
